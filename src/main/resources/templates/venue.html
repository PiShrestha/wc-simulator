<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <body style="font-family: system-ui, sans-serif; margin: 24px">
    <style>
      table {
        border-collapse: collapse;
        width: 100%;
        margin: 12px 0;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 8px;
      }
      th {
        background: #f4f6f8;
        text-align: left;
      }
      h2,
      h3 {
        margin-top: 24px;
      }
    </style>
    <h2 th:text="${'Matches in ' + city}"></h2>

    <form action="/venue" method="get" style="margin: 12px 0">
      <input type="hidden" name="city" th:value="${city}" />
      <label style="font-weight: 600; margin-right: 8px">Stage Filter</label>
      <select name="stage" th:value="${stageFilter}" style="padding: 4px 8px">
        <option
          value=""
          th:selected="${stageFilter == null || stageFilter == ''}"
        >
          All
        </option>
        <option
          value="Round of 32"
          th:selected="${stageFilter == 'Round of 32'}"
        >
          Round of 32
        </option>
        <option
          value="Round of 16"
          th:selected="${stageFilter == 'Round of 16'}"
        >
          Round of 16
        </option>
        <option
          value="Quarterfinal"
          th:selected="${stageFilter == 'Quarterfinal'}"
        >
          Quarterfinal
        </option>
        <option value="Semifinal" th:selected="${stageFilter == 'Semifinal'}">
          Semifinal
        </option>
        <option
          value="Third Place"
          th:selected="${stageFilter == 'Third Place'}"
        >
          Third Place
        </option>
        <option value="Final" th:selected="${stageFilter == 'Final'}">
          Final
        </option>
      </select>
      <button type="submit" style="margin-left: 8px; padding: 4px 10px">
        Apply
      </button>
    </form>

    <table border="1">
      <tr>
        <th>Match ID</th>
        <th>Stage</th>
        <th>Date</th>
        <th>Home Slot</th>
        <th>Away Slot</th>
      </tr>

      <tr th:each="m : ${matches}">
        <td th:text="${m.matchId}"></td>
        <td th:text="${m.stage}"></td>
        <td th:text="${m.date}"></td>
        <td th:text="${m.homeSlot}"></td>
        <td th:text="${m.awaySlot}"></td>
      </tr>
    </table>

    <h3 th:text="${'Possible Teams in ' + city}"></h3>
    <ul>
      <li th:each="t : ${teams}" th:text="${t.name}"></li>
      <li th:if="${teams == null || #lists.isEmpty(teams)}">
        No data available
      </li>
    </ul>

    <h3>Possible Matchups</h3>
    <table border="1">
      <tr>
        <th>Match ID</th>
        <th>Stage</th>
        <th>Date</th>
        <th>City</th>
        <th>Home</th>
        <th>Home Slot</th>
        <th>Away</th>
        <th>Away Slot</th>
        <th>Avg Rank</th>
      </tr>
      <tr th:each="p : ${pairings}">
        <td th:text="${p.matchId}"></td>
        <td th:text="${p.stage}"></td>
        <td th:text="${p.date}"></td>
        <td th:text="${p.city}"></td>
        <td th:text="${p.home}"></td>
        <td th:text="${p.homeSlot}"></td>
        <td th:text="${p.away}"></td>
        <td th:text="${p.awaySlot}"></td>
        <td th:text="${#numbers.formatDecimal(p.avgRank, 1, 1)}"></td>
      </tr>
    </table>

    <a href="/">Back</a>
  </body>
</html>
